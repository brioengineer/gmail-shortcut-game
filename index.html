<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gmail Shortcut Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Gmail-inspired color palette */
        :root {
            --gmail-red: #D93025;
            --gmail-blue: #1A73E8;
            --gmail-yellow: #FBBC04;
            --gmail-green: #34A853;
            --gmail-gray: #F1F3F4;
            --text-dark: #202124;
            --text-light: #5f6368;
        }
        .correct-animation {
            animation: correct 0.4s ease-out;
        }
        .incorrect-animation {
            animation: incorrect 0.4s ease-in-out;
        }
        @keyframes correct {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); background-color: var(--gmail-green); }
            100% { transform: scale(1); }
        }
        @keyframes incorrect {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
        }
        .timer-bar-inner {
            transition: width 0.2s linear;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4 text-text-dark">

    <div id="gameContainer" class="w-full max-w-2xl mx-auto text-center">
        
        <!-- Start Screen -->
        <div id="startScreen" class="bg-white p-8 md:p-12 rounded-2xl shadow-lg">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-2">Gmail Shortcut Challenge</h1>
            <p class="text-lg text-text-light mb-8">How fast can you recall Gmail shortcuts? Press the right keyboard shortcuts for the actions shown.</p>
            <button id="startButton" class="bg-gmail-blue text-white font-bold py-3 px-8 rounded-lg text-xl hover:bg-blue-700 transition-colors transform hover:scale-105">Start Game</button>
        </div>

        <!-- Game Screen (Initially Hidden) -->
        <div id="gameScreen" class="hidden">
            <!-- Header with Stats -->
            <div class="flex justify-between items-center mb-6">
                <div class="text-left">
                    <p class="text-sm text-text-light">Score</p>
                    <p id="score" class="text-3xl font-bold">0</p>
                </div>
                <div class="text-right">
                    <p class="text-sm text-text-light">Time Left</p>
                    <p id="time" class="text-3xl font-bold">30</p>
                </div>
            </div>
            
            <!-- Timer Bar -->
            <div class="w-full bg-gray-200 rounded-full h-4 mb-8 shadow-inner">
                <div id="timerBar" class="bg-gradient-to-r from-gmail-green to-gmail-blue h-4 rounded-full timer-bar-inner"></div>
            </div>

            <!-- Main Action Card -->
            <div id="shortcutCard" class="bg-white p-10 md:p-16 rounded-2xl shadow-2xl transition-transform duration-300">
                <p class="text-lg text-text-light mb-2">Action</p>
                <h2 id="actionText" class="text-4xl md:text-6xl font-black truncate">Compose</h2>
                <div id="feedback" class="mt-4 h-8 text-2xl font-bold"></div>
            </div>
        </div>

        <!-- Game Over Screen (Initially Hidden) -->
        <div id="gameOverScreen" class="hidden bg-white p-8 md:p-12 rounded-2xl shadow-lg">
            <h2 class="text-4xl font-extrabold mb-2">Time's Up!</h2>
            <p class="text-lg text-text-light mb-4">Your final score is:</p>
            <p id="finalScore" class="text-8xl font-black text-gmail-blue mb-8">0</p>
            <button id="restartButton" class="bg-gmail-blue text-white font-bold py-3 px-8 rounded-lg text-xl hover:bg-blue-700 transition-colors transform hover:scale-105">Play Again</button>
        </div>

    </div>

    <script>
        // DOM Elements
        const startScreen = document.getElementById('startScreen');
        const gameScreen = document.getElementById('gameScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const startButton = document.getElementById('startButton');
        const restartButton = document.getElementById('restartButton');
        const scoreDisplay = document.getElementById('score');
        const timeDisplay = document.getElementById('time');
        const timerBar = document.getElementById('timerBar');
        const actionText = document.getElementById('actionText');
        const shortcutCard = document.getElementById('shortcutCard');
        const feedback = document.getElementById('feedback');
        const finalScoreDisplay = document.getElementById('finalScore');

        // Gmail Shortcuts Data
        const shortcuts = [
            { action: "Compose", key: "c" },
            { action: "Archive", key: "e" },
            { action: "Reply", key: "r" },
            { action: "Reply All", key: "a" },
            { action: "Create Task", key: "shift t"},
            { action: "Label", key: "l"},
        ];

        // Game State
        let score = 0;
        let timeLeft = 30; // initial time
        const maxTime = 30;
        let timerInterval;
        let currentShortcut;
        let isGameActive = false;

        // --- Game Logic ---

        function startGame() {
            startScreen.classList.add('hidden');
            gameOverScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');

            score = 0;
            timeLeft = maxTime;
            isGameActive = true;
            
            updateScore();
            updateTimerDisplay();
            nextShortcut();

            timerInterval = setInterval(updateTimer, 1000);
            window.addEventListener('keydown', handleKeyPress);
        }

        function endGame() {
            isGameActive = false;
            clearInterval(timerInterval);
            gameScreen.classList.add('hidden');
            gameOverScreen.classList.remove('hidden');
            finalScoreDisplay.textContent = score;
            window.removeEventListener('keydown', handleKeyPress);
        }

        function updateTimer() {
            timeLeft--;
            updateTimerDisplay();
            if (timeLeft <= 0) {
                endGame();
            }
        }

        function updateTimerDisplay() {
            timeDisplay.textContent = timeLeft;
            const percentage = (timeLeft / maxTime) * 100;
            timerBar.style.width = `${percentage}%`;
            // Change color as time runs out
            if (percentage < 25) {
                timerBar.style.backgroundColor = 'var(--gmail-red)';
            } else if (percentage < 50) {
                timerBar.style.backgroundColor = 'var(--gmail-yellow)';
            } else {
                timerBar.style.background = 'linear-gradient(to right, var(--gmail-green), var(--gmail-blue))';
            }
        }
        
        function updateScore() {
            scoreDisplay.textContent = score;
        }

        function nextShortcut() {
            const randomIndex = Math.floor(Math.random() * shortcuts.length);
            currentShortcut = shortcuts[randomIndex];
            actionText.textContent = currentShortcut.action;
            feedback.textContent = '';
        }

        function handleKeyPress(e) {
            if (!isGameActive) return;

            // Prevent default browser actions for keys like '/' (search)
            e.preventDefault();

            if (e.key.toLowerCase() === currentShortcut.key) {
                // Correct answer
                score++;
                timeLeft = Math.min(maxTime, timeLeft + 2); // Add 2 seconds bonus, capped at maxTime
                updateScore();
                updateTimerDisplay();
                
                shortcutCard.classList.add('correct-animation');
                feedback.textContent = `Correct! It's "${currentShortcut.key}"`;
                feedback.style.color = 'var(--gmail-green)';
                
                setTimeout(() => {
                    shortcutCard.classList.remove('correct-animation');
                    nextShortcut();
                }, 400);

            } else {
                // Incorrect answer
                timeLeft = Math.max(0, timeLeft - 3); // Subtract 3 seconds penalty
                updateTimerDisplay();
                shortcutCard.classList.add('incorrect-animation');
                feedback.textContent = `Nope! The correct key was "${currentShortcut.key}"`;
                feedback.style.color = 'var(--gmail-red)';

                setTimeout(() => {
                    shortcutCard.classList.remove('incorrect-animation');
                }, 400);
            }
        }

        // Event Listeners
        startButton.addEventListener('click', startGame);
        restartButton.addEventListener('click', startGame);

    </script>
</body>
</html>

